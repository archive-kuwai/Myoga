<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>myoga</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="http://crypto-js.googlecode.com/svn/tags/3.0.1/build/rollups/sha256.js"></script>
	<script type="text/javascript" src="myAjaxEngineToMyoga.js"></script>
	<link rel="stylesheet" href="index.css" type="text/css" media="screen" title="no title">
	<script type="text/javascript" src="./jQueryPlugins/Lightbox_me/jquery.lightbox_me.js"></script>
	<link rel="stylesheet" href="./jQueryPlugins/Lightbox_me/styles.css" type="text/css" media="screen" title="no title">
</head>
                                                     
<body>
	<header>
		<ul>
			<li><a href="#" id="button_to_open_login_dialog" >Log In</a></li>
			<li id="who_am_i">（Log Inしていません）</li>
		</ul>
		<nav id="nav"></nav>
	</header>
	<section id="main_section"/>
	<footer/>

	<!-- ナビゲーションに関する記述 -->	
	<script>
		var showPageFunction = function(e){
			ajaxToMyoga(
					{name: "giveme_" + e.currentTarget.id},  
					function(result){$("#main_section").html(result.string);}
			);
			e.preventDefault();
		}
		$(function(){
			var pages = ["page1","page2","page3"];
			var namesForDisplay = ["ページ１ ","ページ２ ","特別ページ "];
			for(var i=0; i<pages.length; i++){
				$("#nav").append("<a href='#' id='" + pages[i] + "'>" + namesForDisplay[i] + "</a>");
				$("#"+pages[i]).click(showPageFunction);
			}
		});
	</script>
	
	<!-- ログインダイアログに関する記述 -->	
	<div id="login_dialog" style="display:none; left:50%; margin-left:-223px; z-index:1002; position:fixed; top:50%; margin-top:-159px;">
		<h3 id="see_id" class="sprited">Can I see some ID?</h3>
		<span>Please sign in using the form below</span>
		<div id="login_form">
		    <label><strong>Username:</strong> <input id="uid" class="sprited" type="text" required></label>
		    <label><strong>Password:</strong> <input id="pw" class="sprited" type="password" required></label>
		    <div id="actions">
		        <a class="close form_button sprited" id="cancel" href="#">Cancel</a>
		        <a class="form_button sprited" id="log_in" href="#">Sign in</a>
		    </div>
		</div>
		<h3 id="left_out" class="sprited">Feeling left out?</h3>
		<span>Don't be sad, just <a href="#">click here</a> to sign up!</span>
		<a id="close_x" class="close sprited" href="#">close</a>
	</div>
	<script>
		$('#button_to_open_login_dialog').click(function(e) {
		    $('#login_dialog').lightbox_me({
		        centered: true, 
		        onLoad: function() {$('#uid').focus()}
		    });
		    e.preventDefault();
		});
		$('#log_in').click(function(e) {
			var pw = $("#pw").val();
			$("#pw").val("");			
			setGlobalScopeVariable_WHO_AM_I($('#uid').val(),pw);
			pw = "";
			ajaxToMyoga({name:"getPerson",params:{a:5,b:6,c:7}}, function(result){console.log(result);});
			$("#login_dialog").trigger('close');
			e.preventDefault();
		});
	</script>
		
</body>
</html>