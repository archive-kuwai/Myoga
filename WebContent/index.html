<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<title>myoga</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="http://crypto-js.googlecode.com/svn/tags/3.0.1/build/rollups/sha256.js"></script>
	<script type="text/javascript" src="./jQueryPlugins/Lightbox_me/jquery.lightbox_me.js"></script>
	<link rel="stylesheet" href="index.css" type="text/css" media="screen" title="no title" charset="utf-8">
	<link rel="stylesheet" href="./jQueryPlugins/Lightbox_me/styles.css" type="text/css" media="screen" title="no title" charset="utf-8">
	<script type="text/javascript" src="buildMyCommand.js"></script>
	<script type="text/javascript" src="mySHA.js"></script>
	<script>
		var global_myURL = "./API";
		function makeMyID(uid,pw){global_myID = {"uid":uid,"key":sHA256WithHEXEncoding(pw)};}
	</script>
</head>
                                                     
<body>
	<div class="header">
		<ul>
			<li id="siteid">myoga</li>
			<li id="who">（ログインしていません）</li>
			<a href="#" id="sign_up_button" >Login</a>
		</ul>
		<hr>
	</div>
	<div class="navigater">
		<a href="#" id="page1">page1</a>
		<a href="#" id="page2">page2</a>	
		<a href="#" id="page3">page3</a>
		<hr>
	</div>
	<iframe id="content_frame" src="page1.html">
		（お使いのブラウザーアプリでは、当サイトは表示できません）
	</iframe>

	<!-- ログイン（sign_up）に関する記述 -->	
	<div id="sign_up" style="display: none; left: 50%; margin-left: -223px; z-index: 1002; position: fixed; top: 50%; margin-top: -159px; ">
		<h3 id="see_id" class="sprited">Can I see some ID?</h3>
		<span>Please sign in using the form below</span>
		<div id="sign_up_form">
		    <label><strong>Username:</strong> <input id="uid" class="sprited"></label>
		    <label><strong>Password:</strong> <input id="pw" class="sprited"></label>
		    <div id="actions">
		        <a class="close form_button sprited" id="cancel" href="#">Cancel</a>
		        <a class="form_button sprited" id="log_in" href="#">Sign in</a>
		    </div>
		</div>
		<h3 id="left_out" class="sprited">Feeling left out?</h3>
		<span>Don't be sad, just <a href="#">click here</a> to sign up!</span>
		<a id="close_x" class="close sprited" href="#">close</a>
	</div>
	<script>
		$('#sign_up_button').click(function(e) {
		    $('#sign_up').lightbox_me({
		        centered: true, 
		        onLoad: function() { 
		            $('#login').find('input:first').focus()
		            }
		        });
		    e.preventDefault();
		});
	</script>
	<script>
		$('#log_in').click(function(e) {
			makeMyID($('#uid').val(),$('#pw').val());
			$.ajax({
					type:"POST",
					url:global_myURL,
					data:myCommand({
						who:global_myID,
						method:{name:"getPerson", params:{a:1,b:2,c:3}},
					}),
					success:function(result){console.log(result);},
					error:function(error){console.log("ajaxエラー。"); console.log(error);}
			});
			$("#sign_up").trigger('close');
			e.preventDefault();
		});
	</script>

	<!-- ナビゲーション（navigation）に関する記述 -->	
	<script>
		$('#page1').click(function(e) {
			$("#content_frame").attr("src","page1.html");
			e.preventDefault();
		});
	</script>
	<script>
		$('#page2').click(function(e) {
			$.ajax({
				type:"POST",
				url:global_myURL,
				data:myCommand({
					who:global_myID,
					method:{name:"showPage2", params:{a:9,b:8,c:7}},
				}),
				success:function(result){
					console.log(result);
					if(true==result.bool){$("#content_frame").attr("src","page2.html");}	
					},
				error:function(error){console.log("ajaxエラー。"); console.log(error);}
			});
			//$("#content_frame").attr("src","page2.html");
			e.preventDefault();
		});
	</script>
	<script>
		$('#page3').click(function(e) {
			$("#content_frame").attr("src","page3.html");
			e.preventDefault();
		});
	</script>
</body>
</html>