<h1>Admin Page 3</h1>
<select id='login_users'></select>
<table id='login_users_table' class='simple_table'></table>


<script>
$(function(){
	ajaxToMyogaAPI(
		{
			name:"getLoginUsers",
			params:{a:1,b:2}
		},
		function(result){
			var sel = $('#login_users');
			addOptions(sel, result, result);
			sel.change(function(){
				if(sel.val()=='-'){return;}
				getUserActs(sel.val());
			});
		}
	);
});

getUserActs = function(user){
	ajaxToMyogaAPI(
		{
			name:"getUserActs",
			params:{"uid":user}
		},
		function(result){
			showTable($('#login_users_table'), result);
		}
	);
};
  
showTable = function(tbl, data){
	tbl.empty();
	for(var i=0; i<data.length; i++){
		var d = data[i];
		tbl.append("<tr>" 
				+ td_num_head(i) 
				+ td(d.requestedTime)
				+ td(d.who.uid)
				+ td(d.responsedTime) 
				+ "</tr>");
	}
};

td = function(str){
	return "<td>" + str + "</td>";
};

td_num_head = function(i){
	return td("[" + (i+1) + "]");
};

</script>
