<h1>Admin Page UdX</h1>
<select id='login_users'></select>
<table id='login_users_table' class='simple_table'></table>


<script>
$(function(){
	ajaxToMyogaAPI(
		{
			name:"getLoginUsers",
			params:{a:1,b:2}
		},
		function(result){
			var sel = $('#login_users');
			addOptions(sel, result, result);
			sel.change(function(){
				if(sel.val()=='-'){return;}
				getUserActs(sel.val());
			});
		}
	);
});

getUserActs = function(user){
	ajaxToMyogaAPI(
		{
			name:"getUserActs",
			params:{"uid":user}
		},
		function(result){
			showTable($('#login_users_table'), result);
		}
	);
};
  
showTable = function(tbl, data){
	tbl.empty();
	for(var i=0; i<1; i++){
		console.log("★");
		console.log(i);
		tbl.append("<tr>" 
				+ td_num_head(i) 
				+ td(digA("",data[i]))
				+ "</tr>");

		tbl.append("<tr>" 
				+ td_num_head(i) 
				+ td(digB("",data[i]))
				+ "</tr>");
	}
};

function digA(s,o){
	for(var key in o){
		if(key=='resultInJSON'){
			console.log("resultInJSON !!");
			continue;
		}
		var item = o[key];
		var na = 'primitive';
		if(typeof(item) == 'object'){
			na = 'object';
		}
		s += td(forKey(na) + forKey(key) + forItem(item));
	}
	return s;
}

function digB(s,o){
	console.log("■digB");
	console.log(s);
	console.log(o);
	for(var key in o){
		if(key=='resultInJSON'){console.log("resultInJSON !!");continue;}
		var item = o[key];
		var itemType = typeof(item);
		var eachOne = "";
		if(itemType == 'object'){
			s = digB(s,item); /*Recursive call*/
		}else{
			var eachOne = td(forKey("("+itemType+")") + forKey(key) + forItem(item));
			s = s + eachOne;
		}
	}
	return s;
}

function forKey(k){
	return "<span class='key'>" +k+ "<br/></span>";
}

function forItem(i){
	return "<span class='item'>" +i+ "</span>";
}

td = function(data){
	return "<td>" + data + "</td>";
};

td_num_head = function(i){
	return td("[" + (i+1) + "]");
};
</script>QQREDDdd